<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>TELEFUKER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
*{
  box-sizing:border-box;
  font-family:Arial, sans-serif;
  -webkit-tap-highlight-color: transparent;
}

html, body{
  margin:0;
  padding:0;
  background:#000;
  color:#fff;
  height:100%;
  overflow:hidden;
  touch-action: manipulation;
}

.app{
  height:100vh;
  display:flex;
  flex-direction:column;
  padding:10px;
}

/* T√çTULO */
.title{
  text-align:center;
  font-size:32px;
  font-weight:bold;
  margin:5px 0 10px 0;
  line-height:1;
}

/* JUGADORES */
.players{
  flex:1;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  grid-auto-rows:1fr;
  gap:8px;
}

.player{
  border:2px solid #0f0;
  border-radius:10px;
  padding:6px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  min-height:160px;
}

.player-name{
  text-align:center;
  font-weight:bold;
}

.score{
  font-size:48px;
  text-align:center;
  margin:6px 0;
}

.controls{
  display:flex;
  gap:5px;
}

.controls button{
  flex:1;
  font-size:16px;
  padding:6px;
  border:none;
  border-radius:6px;
  font-weight:bold;
}

/* BOTONES */
.btn-add{ background:#0f0; }
.btn-sub{ background:#f00; color:#fff; }
.btn-buy{ background:#ff0; color:#000; }

.footer{
  display:flex;
  gap:8px;
  margin-top:8px;
}

.footer button{
  flex:1;
  padding:10px;
  font-size:16px;
  border:none;
  border-radius:8px;
  font-weight:bold;
}

.btn-finish{ background:#0f0; }
.btn-cons{ background:#00f; color:#fff; }

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  display:none;
  align-items:center;
  justify-content:center;
}

.modal-content{
  background:#111;
  border:2px solid #0f0;
  padding:20px;
  border-radius:10px;
  max-width:90%;
  text-align:center;
}

.modal-content button{
  margin-top:15px;
  padding:8px 16px;
  font-size:16px;
}
</style>
</head>

<body>
<div class="app">

  <div class="title">TELEFUKER</div>

  <div class="players" id="players"></div>

  <div class="footer">
    <button class="btn-finish" onclick="finalizar()">FINALIZAR</button>
    <button class="btn-cons" onclick="verConsolidado()">CONSOLIDADO</button>
  </div>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content" id="modalContent"></div>
</div>

<script>
const jugadores = [
  {nombre:'Jugador 1', puntos:0, compras:5},
  {nombre:'Jugador 2', puntos:0, compras:5},
  {nombre:'Jugador 3', puntos:0, compras:5},
  {nombre:'Jugador 4', puntos:0, compras:5}
];

const consolidado = {};

function render(){
  const cont = document.getElementById('players');
  cont.innerHTML = '';

  jugadores.forEach((j,i)=>{
    cont.innerHTML += `
      <div class="player">
        <div class="player-name">${j.nombre}</div>
        <div class="score">${j.puntos}</div>
        <div class="controls">
          <button class="btn-add" onclick="sumar(${i})">+1</button>
          <button class="btn-sub" onclick="restar(${i})">-1</button>
          <button class="btn-buy" onclick="usarCompra(${i})">üõí ${j.compras}</button>
        </div>
      </div>
    `;
  });
}

function sumar(i){
  jugadores[i].puntos++;
  render();
}

function restar(i){
  jugadores[i].puntos--;
  render();
}

function usarCompra(i){
  if(jugadores[i].compras > 0){
    jugadores[i].compras--;
    jugadores[i].puntos++;
    render();
  }
}

function finalizar(){
  const ganador = jugadores.reduce((a,b)=> a.puntos < b.puntos ? a : b);
  mostrarModal(`
    <h3>¬øFinalizar partida?</h3>
    <p>Ganador: <strong>${ganador.nombre}</strong></p>
    <button onclick="confirmarGanador('${ganador.nombre}')">CONFIRMAR</button>
    <button onclick="cerrarModal()">CERRAR</button>
  `);
}

function confirmarGanador(nombre){
  consolidado[nombre] = (consolidado[nombre] || 0) + 1;
  cerrarModal();
}

function verConsolidado(){
  let html = '<h3>CONSOLIDADO</h3>';
  jugadores.forEach(j=>{
    html += `<p>${j.nombre}: ${consolidado[j.nombre] || 0}</p>`;
  });
  html += `<button onclick="cerrarModal()">CERRAR</button>`;
  mostrarModal(html);
}

function mostrarModal(html){
  document.getElementById('modalContent').innerHTML = html;
  document.getElementById('modal').style.display = 'flex';
}

function cerrarModal(){
  document.getElementById('modal').style.display = 'none';
}

render();
</script>
</body>
</html>